#!/bin/bash
# Environment Variable Loader Script
# Generated by Claude Code - August 19, 2025
# 
# Usage: source ./load-env.sh
# This script loads all project environment variables

echo "ğŸ”§ Loading DirectDrive Authority Engine environment variables..."

# Load main environment file
if [ -f ".env.local" ]; then
    set -a  # Enable auto-export
    source .env.local
    set +a  # Disable auto-export
    echo "âœ… Loaded .env.local"
else
    echo "âŒ .env.local not found!"
    exit 1
fi

# Load n8n specific environment if exists
if [ -f ".env.n8n" ]; then
    set -a
    source .env.n8n
    set +a
    echo "âœ… Loaded .env.n8n"
fi

# Verify critical services
echo ""
echo "ğŸ” Verifying connections..."

# Check Supabase
if [ ! -z "$NEXT_PUBLIC_SUPABASE_URL" ]; then
    echo "âœ… Supabase: $NEXT_PUBLIC_SUPABASE_URL"
else
    echo "âŒ Supabase URL not set"
fi

# Check n8n
if [ ! -z "$N8N_BASE_URL" ]; then
    echo "âœ… n8n: $N8N_BASE_URL"
else
    echo "âŒ n8n URL not set"
fi

# Check Database
if [ ! -z "$DB_HOST" ]; then
    echo "âœ… Database: $DB_HOST"
else
    echo "âŒ Database host not set"
fi

echo ""
echo "ğŸš€ Environment loaded successfully!"
echo "ğŸ’¡ All credentials are now available in your session."